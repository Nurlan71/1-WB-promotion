# Проект WB promotion - MCP сервер для управления рекламой Wildberries

## Описание

Этот проект представляет собой MCP (Model Context Protocol) сервер для управления внутренней рекламой на Wildberries с использованием API. Он отслеживает метрики **всех активных рекламных кампаний (Автоматических и Аукцион)**, общие показатели продаж и применяет заданную логику для расчета новых ставок (фактическое обновление ставок через API пока не реализовано).

## Структура файлов

* `promotion_config.txt`: Настройки проекта (API-ключи, ID кабинета). **Обязательно заполните!**
* `promotion_api_client.py`: Класс для взаимодействия с WB API (получение списка кампаний, статистики).
* `promotion_data_processing.py`: Функции обработки данных API (CTR, ROI, CPC).
* `promotion_metrics_tracking.py`: Сбор и вывод метрик по кампаниям и продажам.
* `promotion_automation.py`: Логика расчета новых ставок для всех активных кампаний. **Изменение ставок через API - заглушка.**
* `promotion_main.py`: Главный скрипт.
* `promotion_readme.txt`: Этот файл.
* `promotion_logs.txt`: Файл логов.

## Инструкции по запуску

1.  Python 3.7+ и библиотека `requests` (`pip install requests`).
2.  Скопируйте все файлы в одну папку.
3.  Отредактируйте `promotion_config.txt`: внесите ваши `API_KEY_PROMOTION`, `API_KEY_ANALYTICS`, `WB_CABINET_ID`. Строка `CAMPAIGN_ID_TO_TRACK` не используется.
4.  Запустите из командной строки: `python promotion_main.py`.

Скрипт выполнит один цикл: получит список активных кампаний, их статистику (с паузами), статистику продаж, рассчитает изменения ставок (но не применит их) и завершит работу. Логи будут в `promotion_logs.txt`.

## Дальнейшее развитие

* **Реализация обновления ставок:** Доработка `get_current_bid_api` и `update_campaign_bid_api` в `promotion_api_client.py`.
* **Отслеживание динамики:** Сохранение состояния метрик для анализа роста/падения.
* **Непрерывная работа:** Возврат цикла `while True` в `promotion_main.py`.
* **Параметризация логики:** Вынос порогов/шагов ставок в `promotion_config.txt`.
* **Обработка ошибок 429:** Добавление логики повторных попыток с увеличением паузы при получении ошибки `429 Too Many Requests`.